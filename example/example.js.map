{"version":3,"sources":["node_modules/browser-pack/_prelude.js","dist/GuacaMarkdownEditor.js","example/main.js"],"names":[],"mappings":"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","file":"example.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/* global $ */\r\n\r\nclass GuacaAirPopUp {\r\n\t\r\n\tconstructor(editorElement, controlHandlerService, settings) {\r\n\t\tthis.settings = settings || this.getDefaultSettings();\r\n\t\tthis.controlHandlerService = controlHandlerService;\t\r\n\t\tthis.airPopUp = $('<div></div>');\r\n\t\tthis.airPopUp.addClass(\"guaca-airpopup\");\r\n\t\tthis.airPopUp.insertAfter(editorElement);\r\n\t\tthis.addControls(this.settings.controls, this.airPopUp);\r\n\t\tthis.$window = $(window);\r\n\t}\r\n\t\r\n\t// API Start\r\n\t\r\n\tsetPosition(rect) {\r\n\t\tvar y = this.getComputedYPosition(rect.top, rect.bottom),\r\n\t\t\tx = this.getComputedXPosition(rect.left);\r\n\t\t\t\r\n\t\tthis.airPopUp.css(\"top\", y);\r\n\t\tthis.airPopUp.css(\"left\", x);\r\n\t\tthis.airPopUp.css(\"display\", \"block\");\r\n\t}\r\n\t\r\n\thide() {\r\n\t\tthis.airPopUp.css(\"display\", \"none\");\r\n\t}\r\n\t\r\n\tgetHeight() {\r\n\t\treturn this.airPopUp.innerHeight();\r\n\t}\r\n\t\r\n\tgetWidth() {\r\n\t\treturn this.airPopUp.innerWidth();\r\n\t}\r\n\t\r\n\t// API End\r\n\t\r\n\tgetComputedYPosition(top, bottom) {\r\n\t\tvar newYOffset = this.getHeight() + this.settings[\"y-spacing\"];\r\n\t\tvar y;\r\n\t\tif (top < newYOffset) y = bottom + this.settings[\"y-spacing\"];\r\n\t\telse y = top - newYOffset;\r\n\t\treturn y + this.$window.scrollTop();\r\n\t}\r\n\t\r\n\tgetComputedXPosition(left) {\r\n\t\tvar x = left;\r\n\t\tif (left + this.getWidth() + this.settings[\"x-spacing\"] > this.$window.innerWidth())\r\n\t\t\tx = this.$window.innerWidth() - this.getWidth() - this.settings[\"x-spacing\"];\r\n\t\treturn x + this.$window.scrollLeft();\r\n\t}\r\n\t\r\n\taddControls(controls, element) {\r\n\t\tvar self = this;\r\n\t\tfor(var control of controls) {\r\n\t\t\tif(typeof control == \"object\" && control.length) {\r\n\t\t\t\tvar container =  $('<span class=\"container\"></span>');\r\n\t\t\t\tthis.addControls(control, container);\r\n\t\t\t\telement.append(container);\r\n\t\t\t}\r\n\t\t\tvar controlElem = this.createControl(control);\r\n\t\t\telement.append(controlElem);\r\n\t\t\tvar controlHandler = this.controlHandlerService.getHandler(control);\r\n\t\t\tif(controlHandler) {\r\n\t\t\t\tcontrolElem.on(\"click\", function() {\r\n\t\t\t\t\tvar controlAlias = $(this).attr(\"control-alias\");\r\n\t\t\t\t\tvar controlHandler = self.controlHandlerService.getHandler(controlAlias);\r\n\t\t\t\t\tcontrolHandler.execute();\r\n\t\t\t\t});\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tcreateControl(className) {\r\n\t\tvar control = $('<button></button>');\r\n\t\tcontrol.addClass(\"guaca-control\");\r\n\t\tcontrol.addClass(className);\r\n\t\tcontrol.attr(\"control-alias\", className);\r\n\t\treturn control;\r\n\t}\r\n\t\r\n\tgetDefaultControls() {\r\n\t\treturn [\r\n\t\t\t'bold',\r\n\t\t\t'italic',\r\n\t\t\t'divider',\r\n\t\t\t[\r\n\t\t\t\t'small-heading',\r\n\t\t\t\t'medium-heading',\r\n\t\t\t\t'large-heading'\r\n\t\t\t],\r\n\t\t\t'paragraph',\r\n\t\t\t'ol',\r\n\t\t\t'ul',\r\n\t\t\t'code'\r\n\t\t];\r\n\t}\r\n\t\r\n\tgetDefaultSettings() {\r\n\t\treturn {\r\n\t\t\t\"y-spacing\": 8,\r\n\t\t\t\"x-spacing\": 20,\r\n\t\t\t\"controls\": this.getDefaultControls()\r\n\t\t}\r\n\t}\r\n}\n\nclass BaseHandler {\r\n\tconstructor() {\r\n\t\tthis.markdownEditor = null;\r\n\t}\r\n\t\r\n\tregisterMarkdownEditor(markdownEditor) {\r\n\t\tthis.markdownEditor = markdownEditor;\r\n\t}\r\n\t\r\n\tgetCurrentSelection() {\r\n\t\tif(this.markdownEditor) {\r\n\t\t\treturn this.markdownEditor.getCurrentSelection();\r\n\t\t}\r\n\t\tthrow \"registerMarkdownEditor must be called before calling getCurrentSelection.\";\r\n\t}\r\n\t\r\n\texecute() {\r\n\t\tthrow \"Must override the execute method in \" + (typeof this);\r\n\t}\r\n}\n\nclass ControlHandlerService {\r\n\t\r\n\tconstructor() {\r\n\t\tthis.registeredHandlers = [];\r\n\t}\r\n\t\r\n\tregisterHandler(alias, handler) {\r\n\t\tvar isControllerInstance = handler instanceof BaseHandler;\r\n\t\tif(!isControllerInstance) throw \"ControlHandlerService.registerHandler can only register BaseHandler extensions\"\r\n\t\tvar existingHandlerReg = this.registeredHandlers.find(h => h.handler === handler);\r\n\t\tif(existingHandlerReg) {\r\n\t\t\texistingHandlerReg.aliases.push(alias);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tthis.registeredHandlers.push({\r\n\t\t\taliases: [\r\n\t\t\t\talias\r\n\t\t\t],\r\n\t\t\thandler: handler\r\n\t\t});\r\n\t}\r\n\t\r\n\tgetHandler(alias) {\r\n\t\tvar handlerRegistration = \r\n\t\t\tthis.registeredHandlers.find(h => h.aliases.some(a => a === alias));\r\n\t\tif(handlerRegistration)\treturn handlerRegistration.handler;\r\n\t\telse return null;\r\n\t}\r\n}\n\nconst SelectionStatusEnum = {\r\n\tEXCLUSIVE_WHOLE_SELECTION_APPLIED: 0,\r\n\tWHOLE_SELECTION_APPLIED: 1,\r\n\tPARTIAL_SELECTION_MISSING: 2\r\n}\r\n\r\nclass BoldMarkdownHandler extends BaseHandler {\r\n\t\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.elementType = \"b\";\r\n\t}\r\n\t\r\n\texecute() {\r\n\t\tdocument.execCommand(\"Bold\", false, null);\r\n\t\t//var currentSelection = this.getCurrentSelection();\r\n\t\t//if (!currentSelection || currentSelection.rangeCount < 1) return;\r\n\t\t//var selectionState = this.detectSelectionState(currentSelection);\r\n\t\t//var boldEle = document.createElement(this.elementType);\r\n\t\t//currentSelection.getRangeAt(0).surroundContents(boldEle);\r\n\t}\r\n\t\r\n\tdetectSelectionState(currentSelection) {\r\n\t\tvar range = currentSelection.getRangeAt(0);\r\n\t\tvar fragment = range.cloneContents();\r\n\t\tvar div = document.createElement(\"div\")\r\n\t\tdiv.appendChild(fragment.cloneNode(true));\r\n\t\tvar fragmentHtml = div.innerHTML;\r\n\t\tvar commonAncestorTagName = range.commonAncestorContainer.tagName;\r\n\t\tcommonAncestorTagName = commonAncestorTagName ? commonAncestorTagName.toLowerCase() : \"\";\r\n\t\tvar commonAncestorIsHandlerElement = commonAncestorTagName === this.elementType;\r\n\r\n\t\tif (commonAncestorIsHandlerElement && fragmentHtml === range.commonAncestorContainer.innerHtml) {\r\n\t\t\treturn SelectionStatusEnum.EXCLUSIVE_WHOLE_SELECTION_APPLIED;\r\n\t\t} else if (commonAncestorIsHandlerElement) {\r\n\t\t\treturn SelectionStatusEnum.WHOLE_SELECTION_APPLIED;\r\n\t\t} else {\r\n\t\t\treturn SelectionStatusEnum.PARTIAL_SELECTION_MISSING;\r\n\t\t}\r\n\t}\r\n}\n\nvar DefaultHandlerConfig = [\r\n\t{\r\n\t\talias: \"bold\",\r\n\t\thandlerClass: BoldMarkdownHandler\r\n\t}\r\n]\n\nclass GuacaMarkdownEditor {\r\n\t\r\n\tconstructor(inputElement) {\r\n\t\tvar self = this;\r\n\t\tself.inputElement = inputElement;\r\n\t\tself.guacaEditorElement = this.setUpGuacaMarkdownElement();\r\n\t\tself.controlHandlerService = this.setUpControlHandlerService();\r\n\t\tself.airPopUp = new GuacaAirPopUp(self.guacaEditorElement, self.controlHandlerService);\r\n\t\tself.currentSelection = null;\r\n\t\t\r\n\t\tinputElement.css(\"display\", \"none\");\r\n\t\tself.subscribeToEvents();\r\n\t}\r\n\t\r\n\t// API Start \r\n\t\r\n\tgetCurrentSelection() {\r\n\t\treturn this.currentSelection;\r\n\t}\r\n\t\r\n\t// API End\r\n\t\r\n\tsetUpGuacaMarkdownElement() {\r\n\t\tvar guacaElement = $('<div contentEditable=\"true\" class=\"guaca-editor\" ></div>');\r\n\t\tvar attributes = this.inputElement.prop(\"attributes\");\r\n\t\t\r\n\t\t$.each(attributes, (i, a) => {\r\n\t\t\tguacaElement.attr(a.name, a.value);\r\n\t\t});\r\n\t\t\r\n\t\tguacaElement.css(\"display\", \"inline-block\");\r\n\t\tguacaElement.addClass(\"guaca-editor\");\r\n\t\t\r\n\t\tguacaElement.insertAfter(this.inputElement);\r\n\t\t\r\n\t\treturn guacaElement;\r\n\t}\r\n\t\r\n\tsetUpControlHandlerService() {\r\n\t\tvar controlHandlerService = new ControlHandlerService();\r\n\t\tfor(var handler of DefaultHandlerConfig)\r\n\t\t{\r\n\t\t\tvar HandlerClass = handler.handlerClass;\r\n\t\t\tvar handlerInstance = new HandlerClass();\r\n\t\t\thandlerInstance.registerMarkdownEditor(this);\r\n\t\t\tcontrolHandlerService.registerHandler(handler.alias, handlerInstance);\r\n\t\t}\r\n\t\t\r\n\t\treturn controlHandlerService;\r\n\t}\r\n\t\r\n\tsubscribeToEvents() {\r\n\t\tvar self = this;\r\n\t\tthis.guacaEditorElement.on('selectstart', () => {\r\n\t\t\tself.onSelectStart();\r\n\t\t\t$(document).one('mouseup', () => {\r\n\t\t\t\tself.onSelectText();\r\n\t\t\t});\r\n\t\t});\r\n\t\tthis.guacaEditorElement.on('blur', (event) => {\r\n\t\t\tif(event.relatedTarget && $(event.relatedTarget).hasClass(\"guaca-control\"))\r\n\t\t\t\treturn true;\r\n\t\t\telse\r\n\t\t\t\tself.airPopUp.hide();\r\n\t\t});\r\n\t}\r\n\t\r\n\tonSelectText() {\r\n\t\tthis.currentSelection = window.getSelection();\r\n\t\tif(this.currentSelection.type === \"Caret\") return;\r\n\t\tvar rect = this.currentSelection.getRangeAt(0).getBoundingClientRect();\r\n\t\tthis.airPopUp.setPosition(rect);\r\n\t}\r\n\t\r\n\tonSelectStart() {\r\n\t\tthis.airPopUp.hide();\r\n\t}\r\n}\n\nexport default GuacaMarkdownEditor;\n//# sourceMappingURL=GuacaMarkdownEditor.js.map\n","import GuacaMarkdownEditor from '../dist/GuacaMarkdownEditor'\r\n\r\n// Testing\r\nvar editor = new GuacaMarkdownEditor($(\".editorinput\"));\r\n"]}